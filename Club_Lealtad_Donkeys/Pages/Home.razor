@page "/"
@inject HttpClient Http
@inject NavigationManager NavigationManager

<PageTitle>Home</PageTitle>
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Club Miembros de Lealtad</title>
    <style>
      

        body {
            background-color: #32c9aa;
            background-image: url('image/fondoAqua-min.png');
        }

        .club-section {
            max-width: 500px;
            margin: 50px auto;
            padding: 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

            .club-section img {
                width: 200px;
                display: block;
                margin: 10px auto 10px;
            }

            .club-section h5 {
                text-align: center;
                margin-bottom: 10px;
            }

        .form-control:focus {
            box-shadow: none;
            border-color: #28a745;
        }

        .btn-primary {
            background-color: #dc3545;
            border-color: #dc3545;
        }

            .btn-primary:hover {
                background-color: #c82333;
                border-color: #bd2130;
            }

        .separator {
            border: 0;
            height: 1px;
            background: #ccc;
            margin: 10px 0 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="club-section">
            <p class="text-center text-uppercase fw-bold">Club VIP Donkeys</p>
            <hr class="separator">
            <img src="image/logo.jpg" alt="Donkeys Mexicano Fusión">
            <EditForm Model="memberAccount" OnValidSubmit="OnValidSubmit">
                <div  class="d-flex align-content-between">
                    <div class="m-1 flex-fill">
                        <label for="firstName" class="form-label">Nombre</label>
                        <input type="text" @bind-value="memberAccount.Contact.FirstName" class="form-control" id="firstName" placeholder="Nombre">
                    </div>
                    <div class="m-1 flex-fill">
                        <label for="lastName" class="form-label">Apellido</label>
                        <input type="text" @bind-value="memberAccount.Contact.LastName" class="form-control" id="lastName" placeholder="Apellido">
                    </div>
                </div>
                <div class="mb-3">
                    <label class="form-label">Tipo de Documento</label>
                    <select  class="form-select">
                        <option value="DUI">DUI</option>
                        <option value="Pasaporte">Pasaporte</option>
                        <option value="Otro">Otro</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label">Numero de Documento</label>
                    <input type="text" @bind-value="memberAccount.Contact.Id" class="form-control" id="cardNumber" placeholder="00000000-0">
                </div>
                <div class="mb-3">
                    <label for="email"class="form-label">Correo</label>
                    <input type="email" @bind-value="memberAccount.Contact.Email" class="form-control" id="email" placeholder="Correo">
                </div>
                <div class="mb-3">
                    <label for="phone"  class="form-label">Telefono</label>
                    <input type="tel" @bind-value="memberAccount.Contact.Addresses[0].CellPhoneNumber " class="form-control" id="phone" placeholder="Telefono">
                </div>
                <div class="mb-3">
                    <label for="sex" class="form-label">Sexo</label>
                    <select @bind="memberAccount.Contact.Gender" class="form-select" id="sex">
                        <option value="1">Masculino</option>
                        <option value="2">Femenino</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label for="municipio" class="form-label">municipio:</label>
                    <input @bind-value="memberAccount.Contact.Addresses[0].City" class="form-control" list="datalistoptions" id="exampledatalist" placeholder="type to search...">
                    <datalist id="datalistoptions">
                        <option value="">selecciona un municipio</option>
                        <!-- municipios de ahuachapán -->
                        <optgroup label="ahuachapán">
                            <option value="ahuachapán">ahuachapán</option>
                            <option value="apaneca">apaneca</option>
                            <option value="atiquizaya">atiquizaya</option>
                            <option value="concepción de ataco">concepción de ataco</option>
                            <option value="el refugio">el refugio</option>
                            <option value="guaymango">guaymango</option>
                            <option value="jujutla">jujutla</option>
                            <option value="san francisco menéndez">san francisco menéndez</option>
                            <option value="san lorenzo">san lorenzo</option>
                            <option value="san pedro puxtla">san pedro puxtla</option>
                            <option value="tacuba">tacuba</option>
                            <option value="turín">turín</option>
                        </optgroup>
                        <!-- Municipios de Santa Ana -->
                        <optgroup label="Santa Ana">
                            <option value="Candelaria de la Frontera">Candelaria de la Frontera</option>
                            <option value="Chalchuapa">Chalchuapa</option>
                            <option value="Coatepeque">Coatepeque</option>
                            <option value="El Congo">El Congo</option>
                            <option value="El Porvenir">El Porvenir</option>
                            <option value="Masahuat">Masahuat</option>
                            <option value="Metapán">Metapán</option>
                            <option value="San Antonio Pajonal">San Antonio Pajonal</option>
                            <option value="San Sebastián Salitrillo">San Sebastián Salitrillo</option>
                            <option value="Santa Ana">Santa Ana</option>
                            <option value="Santa Rosa Guachipilín">Santa Rosa Guachipilín</option>
                            <option value="Santiago de la Frontera">Santiago de la Frontera</option>
                            <option value="Texistepeque">Texistepeque</option>
                        </optgroup>
                        <!-- Municipios de Sonsonate -->
                        <optgroup label="Sonsonate">
                            <option value="Acajutla">Acajutla</option>
                            <option value="Armenia">Armenia</option>
                            <option value="Caluco">Caluco</option>
                            <option value="Cuisnahuat">Cuisnahuat</option>
                            <option value="Izalco">Izalco</option>
                            <option value="Juayúa">Juayúa</option>
                            <option value="Nahuizalco">Nahuizalco</option>
                            <option value="Nahulingo">Nahulingo</option>
                            <option value="Salcoatitán">Salcoatitán</option>
                            <option value="San Antonio del Monte">San Antonio del Monte</option>
                            <option value="San Julián">San Julián</option>
                            <option value="Santa Catarina Masahuat">Santa Catarina Masahuat</option>
                            <option value="Santa Isabel Ishuatán">Santa Isabel Ishuatán</option>
                            <option value="Santo Domingo Guzmán">Santo Domingo Guzmán</option>
                            <option value="Sonsonate">Sonsonate</option>
                            <option value="Sonzacate">Sonzacate</option>
                        </optgroup>
                        <!-- Municipios de Chalatenango -->
                        <optgroup label="Chalatenango">
                            <option value="Agua Caliente">Agua Caliente</option>
                            <option value="Arcatao">Arcatao</option>
                            <option value="Azacualpa">Azacualpa</option>
                            <option value="Chalatenango">Chalatenango</option>
                            <option value="Comalapa">Comalapa</option>
                            <option value="Citalá">Citalá</option>
                            <option value="Concepción Quezaltepeque">Concepción Quezaltepeque</option>
                            <option value="Dulce Nombre de María">Dulce Nombre de María</option>
                            <option value="El Carrizal">El Carrizal</option>
                            <option value="El Paraíso">El Paraíso</option>
                            <option value="La Laguna">La Laguna</option>
                            <option value="La Palma">La Palma</option>
                            <option value="La Reina">La Reina</option>
                            <option value="Las Vueltas">Las Vueltas</option>
                            <option value="Nueva Concepción">Nueva Concepción</option>
                            <option value="Nueva Trinidad">Nueva Trinidad</option>
                            <option value="Nombre de Jesús">Nombre de Jesús</option>
                            <option value="Ojos de Agua">Ojos de Agua</option>
                            <option value="Potonico">Potonico</option>
                            <option value="San Antonio de la Cruz">San Antonio de la Cruz</option>
                            <option value="San Antonio Los Ranchos">San Antonio Los Ranchos</option>
                            <option value="San Fernando">San Fernando</option>
                            <option value="San Francisco Lempa">San Francisco Lempa</option>
                            <option value="San Francisco Morazán">San Francisco Morazán</option>
                            <option value="San Ignacio">San Ignacio</option>
                            <option value="San Isidro Labrador">San Isidro Labrador</option>
                            <option value="San José Cancasque">San José Cancasque</option>
                            <option value="San José Las Flores">San José Las Flores</option>
                            <option value="San Luis del Carmen">San Luis del Carmen</option>
                            <option value="San Miguel de Mercedes">San Miguel de Mercedes</option>
                            <option value="San Rafael">San Rafael</option>
                            <option value="Santa Rita">Santa Rita</option>
                            <option value="Tejutla">Tejutla</option>
                        </optgroup>
                        <!-- Municipios de Cuscatlán -->
                        <optgroup label="Cuscatlán">
                            <option value="Candelaria">Candelaria</option>
                            <option value="Cojutepeque">Cojutepeque</option>
                            <option value="El Carmen">El Carmen</option>
                            <option value="El Rosario">El Rosario</option>
                            <option value="Monte San Juan">Monte San Juan</option>
                            <option value="Oratorio de Concepción">Oratorio de Concepción</option>
                            <option value="San Bartolomé Perulapía">San Bartolomé Perulapía</option>
                            <option value="San Cristóbal">San Cristóbal</option>
                            <option value="San José Guayabal">San José Guayabal</option>
                            <option value="San Pedro Perulapán">San Pedro Perulapán</option>
                            <option value="San Rafael Cedros">San Rafael Cedros</option>
                            <option value="San Ramón">San Ramón</option>
                            <option value="Santa Cruz Analquito">Santa Cruz Analquito</option>
                            <option value="Santa Cruz Michapa">Santa Cruz Michapa</option>
                            <option value="Suchitoto">Suchitoto</option>
                            <option value="Tenancingo">Tenancingo</option>
                        </optgroup>
                        <!-- Municipios de San Salvador -->
                        <optgroup label="San Salvador">
                            <option value="Aguilares">Aguilares</option>
                            <option value="Apopa">Apopa</option>
                            <option value="Ayutuxtepeque">Ayutuxtepeque</option>
                            <option value="Cuscatancingo">Cuscatancingo</option>
                            <option value="Ciudad Delgado">Ciudad Delgado</option>
                            <option value="El Paisnal">El Paisnal</option>
                            <option value="Guazapa">Guazapa</option>
                            <option value="Ilopango">Ilopango</option>
                            <option value="Mejicanos">Mejicanos</option>
                            <option value="Nejapa">Nejapa</option>
                            <option value="Panchimalco">Panchimalco</option>
                            <option value="Rosario de Mora">Rosario de Mora</option>
                            <option value="San Marcos">San Marcos</option>
                            <option value="San Martín">San Martín</option>
                            <option value="San Salvador">San Salvador</option>
                            <option value="Santiago Texacuangos">Santiago Texacuangos</option>
                            <option value="Santo Tomás">Santo Tomás</option>
                            <option value="Soyapango">Soyapango</option>
                            <option value="Tonacatepeque">Tonacatepeque</option>
                        </optgroup>
                        <!-- Municipios de La Libertad -->
                        <optgroup label="La Libertad">
                            <option value="Antiguo Cuscatlán">Antiguo Cuscatlán</option>
                            <option value="Chiltiupán">Chiltiupán</option>
                            <option value="Ciudad Arce">Ciudad Arce</option>
                            <option value="Colón">Colón</option>
                            <option value="Comasagua">Comasagua</option>
                            <option value="Huizúcar">Huizúcar</option>
                            <option value="Jayaque">Jayaque</option>
                            <option value="Jicalapa">Jicalapa</option>
                            <option value="La Libertad">La Libertad</option>
                            <option value="Nueva San Salvador (Santa Tecla)">Nueva San Salvador (Santa Tecla)</option>
                            <option value="Nuevo Cuscatlán">Nuevo Cuscatlán</option>
                            <option value="San Juan Opico">San Juan Opico</option>
                            <option value="Quezaltepeque">Quezaltepeque</option>
                            <option value="Sacacoyo">Sacacoyo</option>
                            <option value="San José Villanueva">San José Villanueva</option>
                            <option value="San Matías">San Matías</option>
                            <option value="San Pablo Tacachico">San Pablo Tacachico</option>
                            <option value="Talnique">Talnique</option>
                            <option value="Tamanique">Tamanique</option>
                            <option value="Teotepeque">Teotepeque</option>
                            <option value="Tepecoyo">Tepecoyo</option>
                            <option value="Zaragoza">Zaragoza</option>
                        </optgroup>
                        <!-- Municipios de San Vicente -->
                        <optgroup label="San Vicente">
                            <option value="Apastepeque">Apastepeque</option>
                            <option value="Guadalupe">Guadalupe</option>
                            <option value="San Cayetano Istepeque">San Cayetano Istepeque</option>
                            <option value="San Esteban Catarina">San Esteban Catarina</option>
                            <option value="San Ildefonso">San Ildefonso</option>
                            <option value="San Lorenzo">San Lorenzo</option>
                            <option value="San Sebastián">San Sebastián</option>
                            <option value="San Vicente">San Vicente</option>
                            <option value="Santa Clara">Santa Clara</option>
                            <option value="Santo Domingo">Santo Domingo</option>
                            <option value="Tecoluca">Tecoluca</option>
                            <option value="Tepetitán">Tepetitán</option>
                            <option value="Verapaz">Verapaz</option>
                        </optgroup>
                        <!-- Municipios de Cabañas -->
                        <optgroup label="Cabañas">
                            <option value="Cinquera">Cinquera</option>
                            <option value="Dolores">Dolores</option>
                            <option value="Guacotecti">Guacotecti</option>
                            <option value="Ilobasco">Ilobasco</option>
                            <option value="Jutiapa">Jutiapa</option>
                            <option value="San Isidro">San Isidro</option>
                            <option value="Sensuntepeque">Sensuntepeque</option>
                            <option value="Tejutepeque">Tejutepeque</option>
                            <option value="Victoria">Victoria</option>
                        </optgroup>
                        <!-- Municipios de La Paz -->
                        <optgroup label="La Paz">
                            <option value="Cuyultitán">Cuyultitán</option>
                            <option value="El Rosario">El Rosario</option>
                            <option value="Jerusalén">Jerusalén</option>
                            <option value="Mercedes La Ceiba">Mercedes La Ceiba</option>
                            <option value="Olocuilta">Olocuilta</option>
                            <option value="Paraíso de Osorio">Paraíso de Osorio</option>
                            <option value="San Antonio Masahuat">San Antonio Masahuat</option>
                            <option value="San Emigdio">San Emigdio</option>
                            <option value="San Francisco Chinameca">San Francisco Chinameca</option>
                            <option value="San Juan Nonualco">San Juan Nonualco</option>
                            <option value="San Juan Talpa">San Juan Talpa</option>
                            <option value="San Juan Tepezontes">San Juan Tepezontes</option>
                            <option value="San Luis Talpa">San Luis Talpa</option>
                            <option value="San Luis La Herradura">San Luis La Herradura</option>
                            <option value="San Miguel Tepezontes">San Miguel Tepezontes</option>
                            <option value="San Pedro Masahuat">San Pedro Masahuat</option>
                            <option value="San Pedro Nonualco">San Pedro Nonualco</option>
                            <option value="San Rafael Obrajuelo">San Rafael Obrajuelo</option>
                            <option value="Santa María Ostuma">Santa María Ostuma</option>
                            <option value="Santiago Nonualco">Santiago Nonualco</option>
                            <option value="Tapalhuaca">Tapalhuaca</option>
                            <option value="Zacatecoluca">Zacatecoluca</option>
                        </optgroup>
                        <!-- Municipios de Usulután -->
                        <optgroup label="Usulután">
                            <option value="Alegría">Alegría</option>
                            <option value="Berlín">Berlín</option>
                            <option value="California">California</option>
                            <option value="Concepción Batres">Concepción Batres</option>
                            <option value="El Triunfo">El Triunfo</option>
                            <option value="Ereguayquín">Ereguayquín</option>
                            <option value="Estanzuelas">Estanzuelas</option>
                            <option value="Jiquilisco">Jiquilisco</option>
                            <option value="Jucuapa">Jucuapa</option>
                            <option value="Jucuarán">Jucuarán</option>
                            <option value="Mercedes Umaña">Mercedes Umaña</option>
                            <option value="Nueva Granada">Nueva Granada</option>
                            <option value="Ozatlán">Ozatlán</option>
                            <option value="Puerto El Triunfo">Puerto El Triunfo</option>
                            <option value="San Agustín">San Agustín</option>
                            <option value="San Buenaventura">San Buenaventura</option>
                            <option value="San Dionisio">San Dionisio</option>
                            <option value="San Francisco Javier">San Francisco Javier</option>
                            <option value="Santa Elena">Santa Elena</option>
                            <option value="Santa María">Santa María</option>
                            <option value="Santiago de María">Santiago de María</option>
                            <option value="Tecapán">Tecapán</option>
                            <option value="Usulután">Usulután</option>
                        </optgroup>
                        <!-- Municipios de San Miguel -->
                        <optgroup label="San Miguel">
                            <option value="Carolina">Carolina</option>
                            <option value="Chapeltique">Chapeltique</option>
                            <option value="Chinameca">Chinameca</option>
                            <option value="Chirilagua">Chirilagua</option>
                            <option value="Ciudad Barrios">Ciudad Barrios</option>
                            <option value="Comacarán">Comacarán</option>
                            <option value="El Tránsito">El Tránsito</option>
                            <option value="Lolotique">Lolotique</option>
                            <option value="Moncagua">Moncagua</option>
                            <option value="Nueva Guadalupe">Nueva Guadalupe</option>
                            <option value="Nuevo Edén de San Juan">Nuevo Edén de San Juan</option>
                            <option value="Quelepa">Quelepa</option>
                            <option value="San Antonio del Mosco">San Antonio del Mosco</option>
                            <option value="San Gerardo">San Gerardo</option>
                            <option value="San Jorge">San Jorge</option>
                            <option value="San Luis de la Reina">San Luis de la Reina</option>
                            <option value="San Miguel">San Miguel</option>
                            <option value="San Rafael Oriente">San Rafael Oriente</option>
                            <option value="Sesori">Sesori</option>
                            <option value="Uluazapa">Uluazapa</option>
                        </optgroup>
                        <!-- Municipios de Morazán -->
                        <optgroup label="Morazán">
                            <option value="Arambala">Arambala</option>
                            <option value="Cacaopera">Cacaopera</option>
                            <option value="Chilanga">Chilanga</option>
                            <option value="Corinto">Corinto</option>
                            <option value="Delicias de Concepción">Delicias de Concepción</option>
                            <option value="El Divisadero">El Divisadero</option>
                            <option value="El Rosario">El Rosario</option>
                            <option value="Gualococti">Gualococti</option>
                            <option value="Guatajiagua">Guatajiagua</option>
                            <option value="Joateca">Joateca</option>
                            <option value="Jocoaitique">Jocoaitique</option>
                            <option value="Jocoro">Jocoro</option>
                            <option value="Lolotiquillo">Lolotiquillo</option>
                            <option value="Meanguera">Meanguera</option>
                            <option value="Osicala">Osicala</option>
                            <option value="Perquín">Perquín</option>
                            <option value="San Carlos">San Carlos</option>
                            <option value="San Fernando">San Fernando</option>
                            <option value="San Francisco Gotera">San Francisco Gotera</option>
                            <option value="San Isidro">San Isidro</option>
                            <option value="San Simón">San Simón</option>
                            <option value="Sensembra">Sensembra</option>
                            <option value="Sociedad">Sociedad</option>
                            <option value="Torola">Torola</option>
                            <option value="Yamabal">Yamabal</option>
                            <option value="Yoloaiquín">Yoloaiquín</option>
                        </optgroup>
                        <!-- Municipios de La Unión -->
                        <optgroup label="La Unión">
                            <option value="Anamorós">Anamorós</option>
                            <option value="Bolivar">Bolivar</option>
                            <option value="Concepción de Oriente">Concepción de Oriente</option>
                            <option value="Conchagua">Conchagua</option>
                            <option value="El Carmen">El Carmen</option>
                            <option value="El Sauce">El Sauce</option>
                            <option value="Intipucá">Intipucá</option>
                            <option value="La Unión">La Unión</option>
                            <option value="Lislique">Lislique</option>
                            <option value="Meanguera del Golfo">Meanguera del Golfo</option>
                            <option value="Nueva Esparta">Nueva Esparta</option>
                            <option value="Pasaquina">Pasaquina</option>
                            <option value="Polorós">Polorós</option>
                            <option value="San Alejo">San Alejo</option>
                            <option value="San José">San José</option>
                            <option value="Santa Rosa de Lima">Santa Rosa de Lima</option>
                            <option value="Yayantique">Yayantique</option>
                            <option value="Yucuaiquín">Yucuaiquín</option>
                        </optgroup>
                    </datalist>
                </div>

                <div class="d-flex align-content-between">
                    <button type="submit" class="btn btn-success w-100 m-1">Confirmar</button>
                    <button type="button" asp-action="index" class="btn btn-secondary w-100 m-1 ">Cancelar</button>
                </div>
            </EditForm>
        </div>
    </div>
</body>
</html>


@code {
    private bool showLeaveAlert = false;
    private MemberAccount memberAccount = new MemberAccount
        {
            Contact = new Contact
            {
                Addresses = new List<Address>
            {
                new Address { Address1 = "", PhoneNumber = "", Country = "SV", PostCode = "", StateProvinceRegion = "", Type = "0" }
            },
                MiddleName = "",
                Name = "",
                Account = new Account
                {
                    Scheme = new Scheme
                    {
                        Id = "DONKEYS",
                        Club = new Club
                        {
                            Id = "DONKEYS"
                        }
                    }
                }
            }
        };

    private async Task OnValidSubmit(EditContext context)
    {
        // Asignar el ID del Contact al ID del Account
        memberAccount.Contact.Account.Id = memberAccount.Contact.Id;
        memberAccount.Contact.UserName = memberAccount.Contact.Email;
        memberAccount.Contact.Password = memberAccount.Contact.Email;

        await Save();
    }

    private async Task Save()
    {
        var httpResponse = await Http.PostAsJsonAsync<MemberAccount>("/ContactCreate", memberAccount);

        if (!(httpResponse.StatusCode == System.Net.HttpStatusCode.OK))
        {
            showLeaveAlert = true;
        }
        else
        {
            NavigationManager.NavigateTo("/");
        }
    }

    private void CloseMe(bool value)
    {
        showLeaveAlert = false;
    }
}

